<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Add_Digital</name>
        <label>Add Digital</label>
        <locationX>182</locationX>
        <locationY>650</locationY>
        <actionName>addSkillRequirements</actionName>
        <actionType>addSkillRequirements</actionType>
        <connector>
            <targetReference>AddRegionSkillDecision</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>skillRequirement</name>
            <value>
                <stringValue>[{&quot;id&quot;:&quot;de8495e6&quot;,&quot;skillId&quot;:&quot;0C53W00000000NiSAI&quot;,&quot;skillLabel&quot;:&quot;Pillar - Digital&quot;,&quot;skillLevel&quot;:&quot;0&quot;,&quot;skillPriority&quot;:&quot;0&quot;,&quot;isAdditionalSkill&quot;:false}]</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>skillList</assignToReference>
            <name>skillRequirements</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Add_Unified_Commerce</name>
        <label>Add Unified Commerce</label>
        <locationX>710</locationX>
        <locationY>650</locationY>
        <actionName>addSkillRequirements</actionName>
        <actionType>addSkillRequirements</actionType>
        <connector>
            <targetReference>AddRegionSkillDecision</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>skillRequirement</name>
            <value>
                <stringValue>[{&quot;id&quot;:&quot;585188ed&quot;,&quot;skillId&quot;:&quot;0C53W00000000NjSAI&quot;,&quot;skillLabel&quot;:&quot;Pillar - Unified Commerce&quot;,&quot;skillLevel&quot;:&quot;0&quot;,&quot;skillPriority&quot;:&quot;0&quot;,&quot;isAdditionalSkill&quot;:false}]</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>skillList</assignToReference>
            <name>skillRequirements</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>AddAPACSkill</name>
        <label>Add APAC</label>
        <locationX>50</locationX>
        <locationY>950</locationY>
        <actionName>addSkillRequirements</actionName>
        <actionType>addSkillRequirements</actionType>
        <connector>
            <targetReference>AddVIPSkill</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>skillRequirement</name>
            <value>
                <stringValue>[{&quot;id&quot;:&quot;d28ac7d4&quot;,&quot;skillId&quot;:&quot;0C53W00000000MkSAI&quot;,&quot;skillLabel&quot;:&quot;APAC&quot;,&quot;skillLevel&quot;:&quot;0&quot;,&quot;skillPriority&quot;:&quot;0&quot;,&quot;isAdditionalSkill&quot;:false}]</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillInputType</name>
            <value>
                <stringValue>skill</stringValue>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>skillList</assignToReference>
            <name>skillRequirements</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>AddEmeaSkill</name>
        <label>Add EMEA</label>
        <locationX>314</locationX>
        <locationY>950</locationY>
        <actionName>addSkillRequirements</actionName>
        <actionType>addSkillRequirements</actionType>
        <connector>
            <targetReference>AddVIPSkill</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>skillRequirement</name>
            <value>
                <stringValue>[{&quot;id&quot;:&quot;a6858596&quot;,&quot;skillId&quot;:&quot;0C53W00000000MySAI&quot;,&quot;skillLabel&quot;:&quot;EMEA&quot;,&quot;skillLevel&quot;:&quot;0&quot;,&quot;skillPriority&quot;:&quot;0&quot;,&quot;isAdditionalSkill&quot;:false}]</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>skillList</assignToReference>
            <name>skillRequirements</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>AddHyperCare</name>
        <label>Add HyperCare</label>
        <locationX>446</locationX>
        <locationY>1550</locationY>
        <actionName>addSkillRequirements</actionName>
        <actionType>addSkillRequirements</actionType>
        <connector>
            <targetReference>QuerySkillMapping</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>skillRequirement</name>
            <value>
                <stringValue>[{&quot;id&quot;:&quot;225f5913&quot;,&quot;skillId&quot;:&quot;0C53W000000CaZFSA0&quot;,&quot;skillLabel&quot;:&quot;Hypercare&quot;,&quot;skillLevel&quot;:&quot;0&quot;,&quot;skillPriority&quot;:&quot;0&quot;,&quot;isAdditionalSkill&quot;:false}]</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>skillList</assignToReference>
            <name>skillRequirements</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>AddLATAMSkill</name>
        <label>Add LATAM</label>
        <locationX>578</locationX>
        <locationY>950</locationY>
        <actionName>addSkillRequirements</actionName>
        <actionType>addSkillRequirements</actionType>
        <connector>
            <targetReference>AddVIPSkill</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>skillRequirement</name>
            <value>
                <stringValue>[{&quot;id&quot;:&quot;8b96c582&quot;,&quot;skillId&quot;:&quot;0C53W00000000N7SAI&quot;,&quot;skillLabel&quot;:&quot;LATAM&quot;,&quot;skillLevel&quot;:&quot;0&quot;,&quot;skillPriority&quot;:&quot;0&quot;,&quot;isAdditionalSkill&quot;:false}]</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>skillList</assignToReference>
            <name>skillRequirements</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>AddNASkill</name>
        <label>Add NA</label>
        <locationX>842</locationX>
        <locationY>950</locationY>
        <actionName>addSkillRequirements</actionName>
        <actionType>addSkillRequirements</actionType>
        <connector>
            <targetReference>AddVIPSkill</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>skillRequirement</name>
            <value>
                <stringValue>[{&quot;id&quot;:&quot;9f0dc53e&quot;,&quot;skillId&quot;:&quot;0C53W00000000NBSAY&quot;,&quot;skillLabel&quot;:&quot;NA&quot;,&quot;skillLevel&quot;:&quot;0&quot;,&quot;skillPriority&quot;:&quot;0&quot;,&quot;isAdditionalSkill&quot;:false}]</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>skillList</assignToReference>
            <name>skillRequirements</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>AddPlatforms</name>
        <label>AddPlatforms</label>
        <locationX>446</locationX>
        <locationY>650</locationY>
        <actionName>addSkillRequirements</actionName>
        <actionType>addSkillRequirements</actionType>
        <connector>
            <targetReference>AddRegionSkillDecision</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>skillRequirement</name>
            <value>
                <stringValue>[{&quot;id&quot;:&quot;0ed9b88a&quot;,&quot;skillId&quot;:&quot;0C53W00000000NhSAI&quot;,&quot;skillLabel&quot;:&quot;Pillar - AfP/Financial Services&quot;,&quot;skillLevel&quot;:&quot;0&quot;,&quot;skillPriority&quot;:&quot;0&quot;,&quot;isAdditionalSkill&quot;:false}]</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>skillList</assignToReference>
            <name>skillRequirements</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>AddVIP</name>
        <label>Add VIP</label>
        <locationX>446</locationX>
        <locationY>1250</locationY>
        <actionName>addSkillRequirements</actionName>
        <actionType>addSkillRequirements</actionType>
        <connector>
            <targetReference>AddHyperCareSkill</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>skillRequirement</name>
            <value>
                <stringValue>[{&quot;id&quot;:&quot;5bb58ec7&quot;,&quot;skillId&quot;:&quot;0C53W00000000NbSAI&quot;,&quot;skillLabel&quot;:&quot;VIP&quot;,&quot;skillLevel&quot;:&quot;0&quot;,&quot;skillPriority&quot;:&quot;0&quot;,&quot;isAdditionalSkill&quot;:false}]</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>skillList</assignToReference>
            <name>skillRequirements</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>CreateSkillRequirements</name>
        <label>Create Skill Requirements</label>
        <locationX>446</locationX>
        <locationY>2258</locationY>
        <actionName>CreateSkillRequirementsAction</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>LoopOverTaxonomySkillRequirements</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>taxonomySkillMappingLists</name>
            <value>
                <elementReference>QuerySkillMapping</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>RouteWork</name>
        <label>Route work</label>
        <locationX>578</locationX>
        <locationY>3566</locationY>
        <actionName>routeWork</actionName>
        <actionType>routeWork</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>recordId</name>
            <value>
                <elementReference>Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>psrInteractionInfo</name>
        </inputParameters>
        <inputParameters>
            <name>serviceChannelId</name>
            <value>
                <stringValue>0N93W0000008OLYSA2</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>serviceChannelLabel</name>
            <value>
                <stringValue>Case Service Channel</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>serviceChannelDevName</name>
            <value>
                <stringValue>CaseServiceChannel</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>routingType</name>
            <value>
                <stringValue>SkillsBased</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>routingConfigId</name>
            <value>
                <stringValue>0K9QD00000000Mb0AI</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>routingConfigLabel</name>
            <value>
                <stringValue>Flow Routing Configs</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>queueId</name>
        </inputParameters>
        <inputParameters>
            <name>agentId</name>
        </inputParameters>
        <inputParameters>
            <name>agentLabel</name>
        </inputParameters>
        <inputParameters>
            <name>queueLabel</name>
        </inputParameters>
        <inputParameters>
            <name>skillOption</name>
            <value>
                <stringValue>DefineSkillRequirements</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>botId</name>
        </inputParameters>
        <inputParameters>
            <name>botLabel</name>
        </inputParameters>
        <inputParameters>
            <name>recordsToRouteType</name>
            <value>
                <stringValue>single</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <description>Compare old and new skills for a case.</description>
        <name>SkillRequirementsChangeAction</name>
        <label>Skill Requirements Changed?</label>
        <locationX>710</locationX>
        <locationY>3074</locationY>
        <actionName>CompareSkillRequirementAction</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>CheckRequirementsChangeOutcome</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>caseId</name>
            <value>
                <elementReference>Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>newSkillRequirements</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>oldSkillRequirements</name>
            <value>
                <elementReference>QueryCurrentSkillRequirements</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>57.0</apiVersion>
    <assignments>
        <description>Convert the base skill to a mapping record, so it can be picked up by the apex action.</description>
        <name>AddBaseSkillAsRequirement</name>
        <label>Add Base Skill as Requirement</label>
        <locationX>446</locationX>
        <locationY>1958</locationY>
        <assignmentItems>
            <assignToReference>BaseSkillMapping.SkillDeveloperName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Record.OmniBaseSkill__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>BaseSkillMapping.SkillLevel__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>BaseSkillMapping.IsAdditionalSkill__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>QuerySkillMapping</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>BaseSkillMapping</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SkillMappingsToBeProcessed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AddTaxonomySkill</name>
        <label>Add Taxonomy Skill</label>
        <locationX>534</locationX>
        <locationY>2474</locationY>
        <assignmentItems>
            <assignToReference>skillList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>LoopOverTaxonomySkillRequirements</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopOverTaxonomySkillRequirements</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetRecordVariable</name>
        <label>Set Record Variable</label>
        <locationX>666</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>Record</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetCaseRecordById</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AddPillarSkill</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>AddBaseSkillDecision</name>
        <label>Add Base Skill?</label>
        <locationX>578</locationX>
        <locationY>1850</locationY>
        <defaultConnector>
            <targetReference>SkillMappingsToBeProcessed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Base Skill</defaultConnectorLabel>
        <rules>
            <name>AddBaseSkill</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.OmniBaseSkill__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddBaseSkillAsRequirement</targetReference>
            </connector>
            <label>Add Base Skill</label>
        </rules>
    </decisions>
    <decisions>
        <name>AddHyperCareSkill</name>
        <label>Add HyperCare Skill?</label>
        <locationX>578</locationX>
        <locationY>1442</locationY>
        <defaultConnector>
            <targetReference>QuerySkillMapping</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Hypercare</defaultConnectorLabel>
        <rules>
            <name>HyperCare</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.HypercareMode__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddHyperCare</targetReference>
            </connector>
            <label>Hypercare</label>
        </rules>
    </decisions>
    <decisions>
        <description>Add pillar skill if applicable</description>
        <name>AddPillarSkill</name>
        <label>Add Pillar Skill?</label>
        <locationX>578</locationX>
        <locationY>542</locationY>
        <defaultConnector>
            <targetReference>AddRegionSkillDecision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>Digital</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.UseBusinessModelForRouting__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Record.BusinessModel__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Digital</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_Digital</targetReference>
            </connector>
            <label>Digital</label>
        </rules>
        <rules>
            <name>Platforms</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.UseBusinessModelForRouting__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Record.BusinessModel__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Platforms</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddPlatforms</targetReference>
            </connector>
            <label>Platforms</label>
        </rules>
        <rules>
            <name>UnifiedCommerce</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.UseBusinessModelForRouting__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Record.BusinessModel__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Unified Commerce</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_Unified_Commerce</targetReference>
            </connector>
            <label>Unified Commerce</label>
        </rules>
    </decisions>
    <decisions>
        <name>AddRegionSkillDecision</name>
        <label>Add Region Skill?</label>
        <locationX>578</locationX>
        <locationY>842</locationY>
        <defaultConnector>
            <targetReference>AddVIPSkill</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>APAC</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.RegionRouting__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>APAC</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddAPACSkill</targetReference>
            </connector>
            <label>APAC</label>
        </rules>
        <rules>
            <name>EMEA</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.RegionRouting__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>EMEA</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddEmeaSkill</targetReference>
            </connector>
            <label>EMEA</label>
        </rules>
        <rules>
            <name>LATAM</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.RegionRouting__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>LATAM</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddLATAMSkill</targetReference>
            </connector>
            <label>LATAM</label>
        </rules>
        <rules>
            <name>NA</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.RegionRouting__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>NA</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddNASkill</targetReference>
            </connector>
            <label>NA</label>
        </rules>
    </decisions>
    <decisions>
        <name>AddVIPSkill</name>
        <label>Add VIP Skill?</label>
        <locationX>578</locationX>
        <locationY>1142</locationY>
        <defaultConnector>
            <targetReference>AddHyperCareSkill</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No VIP</defaultConnectorLabel>
        <rules>
            <name>VIP</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record.VIPAccount__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddVIP</targetReference>
            </connector>
            <label>VIP</label>
        </rules>
    </decisions>
    <decisions>
        <name>CheckRequirementsChangeOutcome</name>
        <label>Check Requirements Change Outcome</label>
        <locationX>710</locationX>
        <locationY>3182</locationY>
        <defaultConnectorLabel>No Skill Change</defaultConnectorLabel>
        <rules>
            <name>SkillChange</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SkillRequirementsChangeAction</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>RouteWork</targetReference>
            </connector>
            <label>Skill Change</label>
        </rules>
    </decisions>
    <decisions>
        <name>PendingServiceRoutingDecisions</name>
        <label>Pending Service Routing Decisions</label>
        <locationX>578</locationX>
        <locationY>2858</locationY>
        <defaultConnector>
            <targetReference>QueryCurrentSkillRequirements</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>NoPendingServiceRouting</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>QueryPendingServiceRouting.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>RouteWork</targetReference>
            </connector>
            <label>No pending Service Routing</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check if the full record, or only the Id was provided as input.</description>
        <name>RecordOrRecordId</name>
        <label>Record or RecordId</label>
        <locationX>578</locationX>
        <locationY>134</locationY>
        <defaultConnector>
            <targetReference>GetCaseRecordById</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Record Details</defaultConnectorLabel>
        <rules>
            <name>RecordInputGiven</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Record</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddPillarSkill</targetReference>
            </connector>
            <label>Record Populated</label>
        </rules>
    </decisions>
    <decisions>
        <name>SkillMappingsToBeProcessed</name>
        <label>Skill Mappings to be Processed</label>
        <locationX>578</locationX>
        <locationY>2150</locationY>
        <defaultConnector>
            <targetReference>QueryPendingServiceRouting</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Records</defaultConnectorLabel>
        <rules>
            <name>RecordsReturned</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>QuerySkillMapping</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CreateSkillRequirements</targetReference>
            </connector>
            <label>Records Returned</label>
        </rules>
    </decisions>
    <description>This flow contains the logic to create/update skill requirements for cases.</description>
    <environments>Default</environments>
    <interviewLabel>CASE_SubflowOmniChannelRecalcSkillRequirements {!$Flow.CurrentDateTime}</interviewLabel>
    <label>CASE_SubflowOmniChannelRecalcSkillRequirements</label>
    <loops>
        <description>Loop over taxonomy skill requirements and add them to the list.</description>
        <name>LoopOverTaxonomySkillRequirements</name>
        <label>Loop Over Taxonomy Skill Requirements</label>
        <locationX>446</locationX>
        <locationY>2366</locationY>
        <collectionReference>CreateSkillRequirements</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AddTaxonomySkill</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>QueryPendingServiceRouting</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>RoutingFlow</processType>
    <recordLookups>
        <description>Query the Case by Id if the full record was not given as the input.</description>
        <name>GetCaseRecordById</name>
        <label>Get Case Record By Id</label>
        <locationX>666</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SetRecordVariable</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Case</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Query the current requirements to compare them to the new situation.</description>
        <name>QueryCurrentSkillRequirements</name>
        <label>Query Current Skill Requirements</label>
        <locationX>710</locationX>
        <locationY>2966</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SkillRequirementsChangeAction</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RelatedRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>QueryPendingServiceRouting.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>SkillRequirement</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>QueryPendingServiceRouting</name>
        <label>Query Pending Service Routing</label>
        <locationX>578</locationX>
        <locationY>2750</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>PendingServiceRoutingDecisions</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WorkItemId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PendingServiceRouting</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>QuerySkillMapping</name>
        <label>Query Skill Mapping</label>
        <locationX>578</locationX>
        <locationY>1742</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AddBaseSkillDecision</targetReference>
        </connector>
        <filterLogic>(1 AND 5 AND 6) OR (1 AND 2 AND 6) OR (1 AND 2 AND 3) OR (2 AND 4 AND 6) OR (4 AND 2 AND 3) OR (4 AND 5 AND 3) OR (1 AND 5 AND 3)</filterLogic>
        <filters>
            <field>Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Record.Type</elementReference>
            </value>
        </filters>
        <filters>
            <field>SubType__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Record.SubType__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Topic__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Record.ServiceTopic__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Type__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>SubType__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Topic__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>TaxonomySkillMapping__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>452</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>RecordOrRecordId</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>BaseSkillMapping</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TaxonomySkillMapping__c</objectType>
    </variables>
    <variables>
        <name>Record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <description>Case Id</description>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>skillList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SkillRequirement</objectType>
    </variables>
</Flow>
