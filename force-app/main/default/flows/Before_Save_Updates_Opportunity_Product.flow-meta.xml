<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>52.0</apiVersion>
    <assignments>
        <description>Populates Stock Allocation Country based on the user&apos;s Sales Country.</description>
        <name>AssignStockAllocationCountry0</name>
        <label>Assign Stock Allocation Country</label>
        <locationX>50</locationX>
        <locationY>1103</locationY>
        <assignmentItems>
            <assignToReference>$Record.StockAllocationCountry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forCountryEuropeUnitedKingdomUAE</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>QueryForStockAllotment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Populates Stock Allocation Country based on the user&apos;s Sales Country.</description>
        <name>AssignStockAllocationCountry1</name>
        <label>Assign Stock Allocation Country</label>
        <locationX>314</locationX>
        <locationY>1103</locationY>
        <assignmentItems>
            <assignToReference>$Record.StockAllocationCountry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forCountryAustraliaNewZealand</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>QueryForStockAllotment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Populates Stock Allocation Country based on the user&apos;s Sales Country.</description>
        <name>AssignStockAllocationCountry2</name>
        <label>Assign Stock Allocation Country</label>
        <locationX>578</locationX>
        <locationY>1103</locationY>
        <assignmentItems>
            <assignToReference>$Record.StockAllocationCountry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forCountryBrazil</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>QueryForStockAllotment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Populates Stock Allocation Country based on the user&apos;s Sales Country.</description>
        <name>AssignStockAllocationCountry3</name>
        <label>Assign Stock Allocation Country</label>
        <locationX>842</locationX>
        <locationY>1103</locationY>
        <assignmentItems>
            <assignToReference>$Record.StockAllocationCountry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forCountryCanadaMexicoUSA</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>QueryForStockAllotment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Populates Stock Allocation Country based on the user&apos;s Sales Country.</description>
        <name>AssignStockAllocationCountry4</name>
        <label>Assign Stock Allocation Country</label>
        <locationX>1106</locationX>
        <locationY>1103</locationY>
        <assignmentItems>
            <assignToReference>$Record.StockAllocationCountry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forCountryHongKongJapanMalaysiaSingapore</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>QueryForStockAllotment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Populates the Lookup field to Stock Allotment record on the Opportunity Line Item.</description>
        <name>PopulateLookupToStockAllotment</name>
        <label>Populate Lookup to Stock Allotment</label>
        <locationX>996</locationX>
        <locationY>1655</locationY>
        <assignmentItems>
            <assignToReference>$Record.StockAllotment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetStockAllotmentRecord.Id</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <decisions>
        <name>Created_or_Updated</name>
        <label>Created or Updated</label>
        <locationX>1128</locationX>
        <locationY>311</locationY>
        <defaultConnector>
            <targetReference>Unapproved_Terminal_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Updated</defaultConnectorLabel>
        <rules>
            <name>Created</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>POSAdmin</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UnapprovedTerminal</targetReference>
            </connector>
            <label>Created</label>
        </rules>
    </decisions>
    <decisions>
        <name>NewOrChangedRollOutArea</name>
        <label>New or Changed Roll-Out Area?</label>
        <locationX>1128</locationX>
        <locationY>863</locationY>
        <defaultConnector>
            <targetReference>QueryForStockAllotment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesRollOutAreaNewOrChanged</name>
            <conditionLogic>((1 AND 2) OR 3) AND 4</conditionLogic>
            <conditions>
                <leftValueReference>forNewRecord</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Opportunity.DontRunStockAllocationCountryLogic__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>WhatRollOutArea</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>Only done for Payment Terminals currently.</description>
        <name>QueryForStockAllotment</name>
        <label>Query for Stock Allotment?</label>
        <locationX>1128</locationX>
        <locationY>1415</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesPaymentTerminal</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Product2.Family</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Payment Terminal</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetStockAllotmentRecord</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Unapproved_Terminal_0</name>
        <label>Unapproved Terminal</label>
        <locationX>1568</locationX>
        <locationY>431</locationY>
        <defaultConnector>
            <targetReference>NewOrChangedRollOutArea</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>FieldsUpdatedToUnapprovedValues</name>
            <conditionLogic>9 AND 1 AND 2 AND 5 AND (8 OR (3 AND 6) OR (4 AND 7))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceDate</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>x18000DaysAhead</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quantity</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ServiceDate</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quantity</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>POSAdmin</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.ServiceDate</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>$Record.ServiceDate</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.Quantity</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>$Record.Quantity</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Product_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Hardware</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Terminal_Not_Approved_0</targetReference>
            </connector>
            <label>Fields Updated to Unapproved Values?</label>
        </rules>
        <rules>
            <name>FieldsUpdatedToApprovedValues</name>
            <conditionLogic>(1 OR 2) AND (3 OR 4) AND 5 AND 6</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceDate</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>x18000DaysAhead</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quantity</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ServiceDate</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quantity</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>POSAdmin</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Product_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Hardware</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>TerminalApproved_0_0</targetReference>
            </connector>
            <label>Fields Updated to Approved Values?</label>
        </rules>
        <rules>
            <name>Service2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Product_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Service</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NewOrChangedRollOutArea</targetReference>
            </connector>
            <label>Service</label>
        </rules>
    </decisions>
    <decisions>
        <name>UnapprovedTerminal</name>
        <label>Unapproved Terminal</label>
        <locationX>688</locationX>
        <locationY>431</locationY>
        <defaultConnector>
            <targetReference>NewOrChangedRollOutArea</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>UnapprovedOutcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceDate</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>x18000DaysAhead</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Quantity</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>POSAdmin</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Product_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Hardware</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>TerminalNotApproved</targetReference>
            </connector>
            <label>Unapproved</label>
        </rules>
        <rules>
            <name>Approved</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Product_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Hardware</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>TerminalApproved_0</targetReference>
            </connector>
            <label>Approved</label>
        </rules>
        <rules>
            <name>Service</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Product_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Service</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NewOrChangedRollOutArea</targetReference>
            </connector>
            <label>Service</label>
        </rules>
    </decisions>
    <decisions>
        <name>WhatRollOutArea</name>
        <label>What Roll-Out Area?</label>
        <locationX>710</locationX>
        <locationY>983</locationY>
        <defaultConnector>
            <targetReference>QueryForStockAllotment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Don&apos;t Run</defaultConnectorLabel>
        <rules>
            <name>EUUKUAE</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Europe ( Non UK )</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>United Arab Emirates</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>United Kingdom</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignStockAllocationCountry0</targetReference>
            </connector>
            <label>EU, UK or UAE</label>
        </rules>
        <rules>
            <name>AustraliaNewZealand</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Australia</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>New Zealand</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignStockAllocationCountry1</targetReference>
            </connector>
            <label>Australia, New Zealand</label>
        </rules>
        <rules>
            <name>Brazil</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Brazil</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignStockAllocationCountry2</targetReference>
            </connector>
            <label>Brazil</label>
        </rules>
        <rules>
            <name>CanadaMexicoUSA</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Canada</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Mexico</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>United States</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignStockAllocationCountry3</targetReference>
            </connector>
            <label>Canada, Mexico, USA</label>
        </rules>
        <rules>
            <name>HongKongJapanMalaysiaSingapore</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Hong Kong</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Japan</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Malaysia</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Roll_Out_Area__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Singapore</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignStockAllocationCountry4</targetReference>
            </connector>
            <label>Hong Kong, Japan, Malaysia, Singapore</label>
        </rules>
    </decisions>
    <description>22.11.2022 - for terminal type = service changes in IPP Status are not required, decisions updated accordingly</description>
    <environments>Default</environments>
    <formulas>
        <name>forCountryAustraliaNewZealand</name>
        <dataType>String</dataType>
        <expression>CASE({!$User.SalesCountry__c},
&apos;Australia&apos;, &apos;Australia&apos;,
&apos;New Zealand&apos;, &apos;Australia&apos;,
&apos;Australia (Other)&apos;
)</expression>
    </formulas>
    <formulas>
        <name>forCountryBrazil</name>
        <dataType>String</dataType>
        <expression>CASE({!$User.SalesCountry__c},
&apos;Brazil&apos;, &apos;Brazil&apos;,
&apos;Brazil (Other)&apos;
)</expression>
    </formulas>
    <formulas>
        <name>forCountryCanadaMexicoUSA</name>
        <dataType>String</dataType>
        <expression>CASE({!$User.SalesCountry__c},
&apos;Canada&apos;, &apos;United States&apos;,
&apos;Mexico&apos;, &apos;United States&apos;,
&apos;United States&apos;, &apos;United States&apos;,
&apos;United States (Other)&apos;
)</expression>
    </formulas>
    <formulas>
        <name>forCountryEuropeUnitedKingdomUAE</name>
        <dataType>String</dataType>
        <expression>CASE({!$User.SalesCountry__c},
&apos;Belgium&apos;, &apos;Belgium&apos;,
&apos;France&apos;, &apos;France&apos;,
&apos;Germany&apos;, &apos;Germany&apos;,
&apos;Italy&apos;, &apos;Italy&apos;,
&apos;Netherlands&apos;, &apos;Netherlands&apos;,
&apos;Spain&apos;, &apos;Spain&apos;,
&apos;Sweden&apos;, &apos;Sweden&apos;,
&apos;United Arab Emirates&apos;, &apos;United Arab Emirates&apos;,
&apos;United Kingdom&apos;, &apos;United Kingdom&apos;,
&apos;Europe (Other)&apos;
)</expression>
    </formulas>
    <formulas>
        <name>forCountryHongKongJapanMalaysiaSingapore</name>
        <dataType>String</dataType>
        <expression>CASE({!$User.SalesCountry__c},
&apos;Hong Kong&apos;, &apos;Singapore&apos;,
&apos;Japan&apos;, &apos;Singapore&apos;,
&apos;Malaysia&apos;, &apos;Singapore&apos;,
&apos;Singapore&apos;, &apos;Singapore&apos;,
&apos;Singapore (Other)&apos;
)</expression>
    </formulas>
    <formulas>
        <description>Retrieves Month from Rollout Date</description>
        <name>forMonth</name>
        <dataType>String</dataType>
        <expression>TEXT(MONTH({!$Record.ServiceDate}))</expression>
    </formulas>
    <formulas>
        <name>forNewRecord</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <description>Retrieves year of Rollout Date</description>
        <name>forYear</name>
        <dataType>String</dataType>
        <expression>TEXT(YEAR({!$Record.ServiceDate}))</expression>
    </formulas>
    <formulas>
        <name>POSAdmin</name>
        <dataType>Boolean</dataType>
        <expression>{!$Permission.Manage_POS_Roll_Out_Date}</expression>
    </formulas>
    <formulas>
        <description>This field used to be TODAY() + 180 days, but was updated to this number as auto-approval should no longer occur, but functionality was kept as this might change back in the future.</description>
        <name>x18000DaysAhead</name>
        <dataType>Date</dataType>
        <expression>TODAY()+18000</expression>
    </formulas>
    <interviewLabel>Before-Save Updates Opportunity Product {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Before-Save Updates Opportunity Product</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>GetStockAllotmentRecord</name>
        <label>Get Stock Allotment Record</label>
        <locationX>996</locationX>
        <locationY>1535</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>PopulateLookupToStockAllotment</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ProductFamily__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Product2.Family</elementReference>
            </value>
        </filters>
        <filters>
            <field>ProductModel__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Product2.ProductModel__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Year__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>forYear</elementReference>
            </value>
        </filters>
        <filters>
            <field>Month__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>forMonth</elementReference>
            </value>
        </filters>
        <filters>
            <field>StockAllotmentArea__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.StockAllocationCountry__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>StockAllotment__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Terminal_Not_Approved_0</name>
        <label>Terminal Not Approved</label>
        <locationX>1216</locationX>
        <locationY>551</locationY>
        <connector>
            <targetReference>NewOrChangedRollOutArea</targetReference>
        </connector>
        <inputAssignments>
            <field>POS_Status__c</field>
            <value>
                <stringValue>Needs Review</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>TerminalApproved_0</name>
        <label>Terminal Approved</label>
        <locationX>600</locationX>
        <locationY>551</locationY>
        <connector>
            <targetReference>NewOrChangedRollOutArea</targetReference>
        </connector>
        <inputAssignments>
            <field>POS_Status__c</field>
            <value>
                <stringValue>Approved</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>TerminalApproved_0_0</name>
        <label>Terminal Approved</label>
        <locationX>1480</locationX>
        <locationY>551</locationY>
        <connector>
            <targetReference>NewOrChangedRollOutArea</targetReference>
        </connector>
        <inputAssignments>
            <field>POS_Status__c</field>
            <value>
                <stringValue>Approved</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>TerminalNotApproved</name>
        <label>Terminal Not Approved</label>
        <locationX>336</locationX>
        <locationY>551</locationY>
        <connector>
            <targetReference>NewOrChangedRollOutArea</targetReference>
        </connector>
        <inputAssignments>
            <field>POS_Status__c</field>
            <value>
                <stringValue>Needs Review</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>1002</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Created_or_Updated</targetReference>
        </connector>
        <object>OpportunityLineItem</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordBeforeSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>minimumTerminals</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>1.0</numberValue>
        </value>
    </variables>
</Flow>
