<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>Clear_Referral_Added_Date</name>
        <label>Clear Referral Added Date</label>
        <locationX>116</locationX>
        <locationY>4943</locationY>
        <assignmentItems>
            <assignToReference>$Record.ReferralAddedDate__c</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>Attempting_Contact_Made_set</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Referral_Added_Date</name>
        <label>Set Referral Added Date</label>
        <locationX>380</locationX>
        <locationY>4943</locationY>
        <assignmentItems>
            <assignToReference>$Record.ReferralAddedDate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Attempting_Contact_Made_set</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Sales_Navigator_Fields_0</name>
        <label>Set Sales Navigator Fields</label>
        <locationX>314</locationX>
        <locationY>3335</locationY>
        <assignmentItems>
            <assignToReference>$Record.PointOfEntry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Sales Navigator</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsStatusUpdatedToRejectedRecycleInquiry</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetInternalUserFields</name>
        <label>Set Internal User fields</label>
        <locationX>314</locationX>
        <locationY>1811</locationY>
        <assignmentItems>
            <assignToReference>$Record.Current_Lead_Source_Detail__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forCurrentLeadSourceDetail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.CurrentLeadSource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forCurrentLeadSource</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Initial_Lead_Source_Detail__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forCurrentLeadSourceDetail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.InitialLeadSource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forCurrentLeadSource</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.PointOfEntry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forLastPointOfEntry</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsNewLeadCreatedByPartnerUser</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetLastStatusChangeDate</name>
        <label>Set Last Status Change Date</label>
        <locationX>182</locationX>
        <locationY>3035</locationY>
        <assignmentItems>
            <assignToReference>$Record.LastStatusChangeDate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Lead_from_Sales_Navigator_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetLastStatusChangedDate</name>
        <label>Set Last Status Change</label>
        <locationX>446</locationX>
        <locationY>3035</locationY>
        <assignmentItems>
            <assignToReference>$Record.LastStatusChangeDate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.ProcessedByLeanData__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Lead_from_Sales_Navigator_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetPartnerReferralContactOwner</name>
        <label>Set Partner Referral Contact Owner</label>
        <locationX>314</locationX>
        <locationY>1511</locationY>
        <assignmentItems>
            <assignToReference>$Record.PartnerReferralContactOwner__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.PartnerContact__r.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsLeadCreatedByInternalUser</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetPartnerUserFields</name>
        <label>Set Partner User fields</label>
        <locationX>314</locationX>
        <locationY>2327</locationY>
        <assignmentItems>
            <assignToReference>$Record.CurrentLeadSource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Referral</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Current_Lead_Source_Detail__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Partner</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.InitialLeadSource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Referral</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Initial_Lead_Source_Detail__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Partner</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.PartnerSource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varPartnerUserAccountName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.InitialPartnerSource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varPartnerUserAccountName</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsPartnerReferralUpdated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Stamp_Attempting_Contact_date</name>
        <label>Stamp Attempting Contact date</label>
        <locationX>314</locationX>
        <locationY>5327</locationY>
        <assignmentItems>
            <assignToReference>$Record.Date_Attempting_Contact__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Contact_Made_set</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Stamp_Contact_Made_Date</name>
        <label>Stamp Contact Made Date</label>
        <locationX>314</locationX>
        <locationY>5627</locationY>
        <assignmentItems>
            <assignToReference>$Record.Date_Contact_Made__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Converted</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Stamp_Converted_Date</name>
        <label>Stamp Converted Date</label>
        <locationX>314</locationX>
        <locationY>5927</locationY>
        <assignmentItems>
            <assignToReference>$Record.Date_Converted__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Open</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Stamp_Open_Date</name>
        <label>Stamp Open Date</label>
        <locationX>314</locationX>
        <locationY>6227</locationY>
        <assignmentItems>
            <assignToReference>$Record.Date_Open__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Qualified</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Stamp_ualified_Date</name>
        <label>Stamp ualified Date</label>
        <locationX>314</locationX>
        <locationY>6527</locationY>
        <assignmentItems>
            <assignToReference>$Record.Date_Qualified__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <description>To enforce that Marketo Leads have the field Created From Lead = True</description>
        <name>UpdateCreatedFromLead</name>
        <label>Update Created From Lead</label>
        <locationX>160</locationX>
        <locationY>827</locationY>
        <assignmentItems>
            <assignToReference>$Record.Created_from_Lead__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsPartnerLead</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdateCurrentPartnerSource</name>
        <label>Update Current Partner Source</label>
        <locationX>314</locationX>
        <locationY>2735</locationY>
        <assignmentItems>
            <assignToReference>$Record.PartnerSource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forCurrentPartnerSource</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.InitialPartnerSource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forInitialPartnerSource</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsStatusUpdated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Lead Origin is determined based on Main Form Fill</description>
        <name>UpdateLeadOrigin</name>
        <label>Update Lead Origin</label>
        <locationX>292</locationX>
        <locationY>611</locationY>
        <assignmentItems>
            <assignToReference>$Record.LeadOrigin__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ForLeadOrigin</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CreateViaMarketo</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdateLeanDataAccountID</name>
        <label>Update LeanData Account ID</label>
        <locationX>446</locationX>
        <locationY>395</locationY>
        <assignmentItems>
            <assignToReference>$Record.Fax</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.LeanData__Reporting_Matched_Account__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>PopulateLeadOrigin</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdateMessagesToSales</name>
        <label>Update Messages to Sales</label>
        <locationX>314</locationX>
        <locationY>4235</locationY>
        <assignmentItems>
            <assignToReference>$Record.MessagesToSales__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forMessagesToSales</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsLastUtmArrayUpdated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdatePartner</name>
        <label>Update Partner</label>
        <locationX>314</locationX>
        <locationY>1211</locationY>
        <assignmentItems>
            <assignToReference>$Record.Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Partner v2</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>NewOrUpdatedPartnerReferralContact</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdatePointsOfEntry</name>
        <label>Update Points of Entry</label>
        <locationX>314</locationX>
        <locationY>3935</locationY>
        <assignmentItems>
            <assignToReference>$Record.PointsOfEntry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forPointsOfEntry</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsMessageToSalesUpdated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdateToInquiryQueue</name>
        <label>Update to Inquiry Queue</label>
        <locationX>578</locationX>
        <locationY>3635</locationY>
        <assignmentItems>
            <assignToReference>$Record.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.InquiryQueue</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsLastPointOfEntryUpdated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdateToRecycleQueue</name>
        <label>Update to Recycle Queue</label>
        <locationX>314</locationX>
        <locationY>3635</locationY>
        <assignmentItems>
            <assignToReference>$Record.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.RecycleQueue</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsLastPointOfEntryUpdated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdateToRejectedQueue</name>
        <label>Update to Rejected Queue</label>
        <locationX>50</locationX>
        <locationY>3635</locationY>
        <assignmentItems>
            <assignToReference>$Record.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.RejectedQueue</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IsLastPointOfEntryUpdated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdateTotalUtmArray</name>
        <label>Update Total UTM Array</label>
        <locationX>314</locationX>
        <locationY>4535</locationY>
        <assignmentItems>
            <assignToReference>$Record.TotalUTMArray__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forTotalUtmArray</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Referral_By_Account_Updated</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdateWebsiteMatching</name>
        <label>Update Website Matching</label>
        <locationX>446</locationX>
        <locationY>287</locationY>
        <assignmentItems>
            <assignToReference>$Record.WebsiteMatching2__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>forWebsiteMatching</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdateLeanDataAccountID</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Attempting_Contact_Made_set</name>
        <label>Attempting Contact Made set?</label>
        <locationX>446</locationX>
        <locationY>5219</locationY>
        <defaultConnector>
            <targetReference>Contact_Made_set</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesAttempting_Contact_Made_set</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Attempting Contact</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Stamp_Attempting_Contact_date</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Contact_Made_set</name>
        <label>Contact Made set?</label>
        <locationX>446</locationX>
        <locationY>5519</locationY>
        <defaultConnector>
            <targetReference>Converted</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Contact Made</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Stamp_Contact_Made_Date</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Converted</name>
        <label>Converted?</label>
        <locationX>446</locationX>
        <locationY>5819</locationY>
        <defaultConnector>
            <targetReference>Open</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesConverted</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Converted</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Stamp_Converted_Date</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>HOTFIX 07.09.2023 - Decision node added to enforce that leads created via Marketo Integration have the field &apos;Created From Lead&apos; = true, if confirmed that all new leads should have it no matter what, this decision can be removed and only the assignment kept.</description>
        <name>CreateViaMarketo</name>
        <label>Create via Marketo?</label>
        <locationX>292</locationX>
        <locationY>719</locationY>
        <defaultConnector>
            <targetReference>IsPartnerLead</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>CreatedViaMarketoYes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>forCurrentUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Adyen v2 Marketo Integration</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateCreatedFromLead</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Lead_from_Sales_Navigator_0</name>
        <label>Is Lead from Sales Navigator?</label>
        <locationX>446</locationX>
        <locationY>3227</locationY>
        <defaultConnector>
            <targetReference>IsStatusUpdatedToRejectedRecycleInquiry</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Lead_is_from_Sales_Navigator_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.LeadSource</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Sales Navigator</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Sales_Navigator_Fields_0</targetReference>
            </connector>
            <label>Lead is from Sales Navigator</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks if the Partner Referral is updated.</description>
        <name>Is_Referral_By_Account_Updated</name>
        <label>Is Referral By Account Updated</label>
        <locationX>446</locationX>
        <locationY>4727</locationY>
        <defaultConnector>
            <targetReference>Attempting_Contact_Made_set</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>YesIs_Referral_By_Account_Updated</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Partner_Referral__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.Partner_Referral__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ReferralAddedDate__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.ReferralAddedDate__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>IsPartnerReferral_null</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsLastPointOfEntryUpdated</name>
        <label>Is Last Point Of Entry Updated?</label>
        <locationX>446</locationX>
        <locationY>3827</locationY>
        <defaultConnector>
            <targetReference>IsMessageToSalesUpdated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>LastPointOfEntryIsUpdated</name>
            <conditionLogic>(1 AND 4) OR (2 AND 3 AND 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PointOfEntry__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.PointOfEntry__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PointOfEntry__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdatePointsOfEntry</targetReference>
            </connector>
            <label>Last Point of Entry is updated</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsLastUtmArrayUpdated</name>
        <label>Is Last UTM Array Updated?</label>
        <locationX>446</locationX>
        <locationY>4427</locationY>
        <defaultConnector>
            <targetReference>Is_Referral_By_Account_Updated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>LastUtmArrayIsUpdated</name>
            <conditionLogic>(1 AND 4) OR (2 AND 3 AND 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.LastUTMArray__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.LastUTMArray__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.LastUTMArray__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateTotalUtmArray</targetReference>
            </connector>
            <label>Last UTM Array is updated</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsLeadCreatedByInternalUser</name>
        <label>Is Lead Created By Internal User?</label>
        <locationX>446</locationX>
        <locationY>1703</locationY>
        <defaultConnector>
            <targetReference>IsNewLeadCreatedByPartnerUser</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>LeadIsCreatedByInternalUser</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>forCurrentUserProfileName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Adyen v2 Marketo Integration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>forCurrentUserProfileName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Adyen v2 Partner Community User</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SetInternalUserFields</targetReference>
            </connector>
            <label>Lead Is Created By Internal User</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsMessageToSalesUpdated</name>
        <label>Is Last Message To Sales Updated?</label>
        <locationX>446</locationX>
        <locationY>4127</locationY>
        <defaultConnector>
            <targetReference>IsLastUtmArrayUpdated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>LastMessageToSalesIsUpdated</name>
            <conditionLogic>(1 AND 4) OR (2 AND 3 AND 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Form_text_2__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.Form_text_2__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Form_text_2__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateMessagesToSales</targetReference>
            </connector>
            <label>Last Message to Sales is updated</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsNewLeadCreatedByPartnerUser</name>
        <label>Is New Lead Created By Partner User?</label>
        <locationX>446</locationX>
        <locationY>2003</locationY>
        <defaultConnector>
            <targetReference>IsPartnerReferralUpdated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>LeadIsCreatedByPartnerUser</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>forCurrentUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Adyen v2 Partner Community User</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetPartnerUserAccountId</targetReference>
            </connector>
            <label>Lead Is Created By Partner User</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsPartnerLead</name>
        <label>Is Partner Lead?</label>
        <locationX>446</locationX>
        <locationY>1103</locationY>
        <defaultConnector>
            <targetReference>NewOrUpdatedPartnerReferralContact</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>LeadIsPartner</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordTypeId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>forPartnerLeadRT</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdatePartner</targetReference>
            </connector>
            <label>Lead Is Partner</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsPartnerReferral_null</name>
        <label>IsPartnerReferral null</label>
        <locationX>248</locationX>
        <locationY>4835</locationY>
        <defaultConnector>
            <targetReference>Set_Referral_Added_Date</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesIsPartnerReferral_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Partner_Referral__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Clear_Referral_Added_Date</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsPartnerReferralUpdated</name>
        <label>Is Partner Referral Updated?</label>
        <locationX>446</locationX>
        <locationY>2519</locationY>
        <defaultConnector>
            <targetReference>IsStatusUpdated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>PartnerReferralIsUpdated</name>
            <conditionLogic>(1 AND 2 AND (3 OR 4)) OR (5 AND ((3 AND 6) OR (4 AND 7)))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>forCurrentUserProfileName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Adyen v2 Partner Community User</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Partner_Referral__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PartnerSource__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Partner_Referral__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.Partner_Referral__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PartnerSource__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.PartnerSource__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetPartnerReferral</targetReference>
            </connector>
            <label>Partner Referral is updated</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsStatusUpdated</name>
        <label>Is Status Updated?</label>
        <locationX>446</locationX>
        <locationY>2927</locationY>
        <defaultConnector>
            <targetReference>Is_Lead_from_Sales_Navigator_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>StatusIsUpdated</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Status</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Open</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SetLastStatusChangeDate</targetReference>
            </connector>
            <label>Status is updated</label>
        </rules>
        <rules>
            <name>StausUpdatedToOpen</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Status</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Open</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SetLastStatusChangedDate</targetReference>
            </connector>
            <label>Staus Updated to Open</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsStatusUpdatedToRejectedRecycleInquiry</name>
        <label>Is Status Updated To Rejected/Recycle/Inquiry?</label>
        <locationX>446</locationX>
        <locationY>3527</locationY>
        <defaultConnector>
            <targetReference>IsLastPointOfEntryUpdated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>StatusIsRejected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateToRejectedQueue</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Status is Rejected</label>
        </rules>
        <rules>
            <name>StatusIsRecycle</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Recycle</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateToRecycleQueue</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Status is Recycle</label>
        </rules>
        <rules>
            <name>StatusisInquiry</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Inquiry</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateToInquiryQueue</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Status is Inquiry</label>
        </rules>
    </decisions>
    <decisions>
        <name>NewOrUpdatedPartnerReferralContact</name>
        <label>New or Updated Partner Referral Contact?</label>
        <locationX>446</locationX>
        <locationY>1403</locationY>
        <defaultConnector>
            <targetReference>IsLeadCreatedByInternalUser</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesNewOrUpdatedPartnerReferralContact</name>
            <conditionLogic>(1 AND 2 AND 3) OR (4 AND 5)</conditionLogic>
            <conditions>
                <leftValueReference>ForIsNew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PartnerContact__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PartnerReferralContactOwner__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PartnerContact__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PartnerReferralContactOwner__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SetPartnerReferralContactOwner</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Open</name>
        <label>Open?</label>
        <locationX>446</locationX>
        <locationY>6119</locationY>
        <defaultConnector>
            <targetReference>Qualified</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesOpen</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Open</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Stamp_Open_Date</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>Automatically determine Lead Origin for new leads based on Main Form Fill</description>
        <name>PopulateLeadOrigin</name>
        <label>Populate Lead Origin?</label>
        <locationX>446</locationX>
        <locationY>503</locationY>
        <defaultConnector>
            <targetReference>IsPartnerLead</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>UpdateLeadOriginNewLead</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ForIsNew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateLeadOrigin</targetReference>
            </connector>
            <label>Update Lead Origin</label>
        </rules>
    </decisions>
    <decisions>
        <name>Qualified</name>
        <label>Qualified</label>
        <locationX>446</locationX>
        <locationY>6419</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesConverted_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Qualified</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Stamp_ualified_Date</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>07.09.2023 - Vini - HOTFIX  - Decision node added to enforce that leads created via Marketo Integration have the field &apos;Created From Lead&apos; = true.</description>
    <environments>Default</environments>
    <formulas>
        <name>forCurrentLeadSource</name>
        <dataType>String</dataType>
        <expression>IF(NOT(ISBLANK(TEXT({!$Record.CurrentLeadSource__c}))),TEXT({!$Record.CurrentLeadSource__c}),
IF(OR({!forCurrentUserProfileName}=&quot;Adyen v2 Partnership&quot;,{!forCurrentUserProfileName}=&quot;Adyen v2 Partnership Lead&quot;),&quot;Referral&quot;,
IF({!forCurrentUserProfileName}=&quot;Adyen v2 Account Manager&quot;,&quot;AM Generated&quot;,
&quot;Sales Generated&quot;)))</expression>
    </formulas>
    <formulas>
        <name>forCurrentLeadSourceDetail</name>
        <dataType>String</dataType>
        <expression>IF(NOT(ISBLANK(TEXT({!$Record.CurrentLeadSource__c}))),{!$Record.Current_Lead_Source_Detail__c},
IF(
  OR
    ({!forCurrentUserProfileName}=&quot;Adyen v2 Partnership&quot;,
    {!forCurrentUserProfileName}=&quot;Adyen v2 Partnership Lead&quot;
    ),
  &quot;Partner&quot;,
{!$User.FirstName} &amp; &quot; &quot; &amp; {!$User.LastName}))</expression>
    </formulas>
    <formulas>
        <name>forCurrentPartnerSource</name>
        <dataType>String</dataType>
        <expression>IF(
OR(
AND(ISBLANK({!$Record.Id}),NOT(ISBLANK({!$Record.PartnerSource__c}))),
AND(NOT(ISBLANK({!$Record.Id})),NOT(ISBLANK({!$Record.PartnerSource__c})),{!$Record.PartnerSource__c} &lt;&gt; {!$Record__Prior.PartnerSource__c})),{!$Record.PartnerSource__c},{!GetPartnerReferral.Name})</expression>
    </formulas>
    <formulas>
        <name>forCurrentUserId</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>forCurrentUserProfileName</name>
        <dataType>String</dataType>
        <expression>{!$Profile.Name}</expression>
    </formulas>
    <formulas>
        <name>forInboundLeadRT</name>
        <dataType>String</dataType>
        <expression>{!$Label.Inbound_Lead_V2}</expression>
    </formulas>
    <formulas>
        <name>forInitialPartnerSource</name>
        <dataType>String</dataType>
        <expression>IF(NOT(ISBLANK({!$Record.InitialPartnerSource__c})),{!$Record.InitialPartnerSource__c},
IF(
OR(
AND(ISBLANK({!$Record.Id}),NOT(ISBLANK({!$Record.PartnerSource__c}))),
AND(NOT(ISBLANK({!$Record.Id})),NOT(ISBLANK({!$Record.PartnerSource__c})),{!$Record.PartnerSource__c} &lt;&gt; {!$Record__Prior.PartnerSource__c})),{!$Record.PartnerSource__c},{!GetPartnerReferral.Name}))</expression>
    </formulas>
    <formulas>
        <name>ForIsNew</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <name>forLastPointOfEntry</name>
        <dataType>String</dataType>
        <expression>IF(NOT(ISBLANK({!$Record.PointOfEntry__c})),{!$Record.PointOfEntry__c},
IF(OR({!forCurrentUserProfileName}=&quot;Adyen v2 Partnership&quot;,{!forCurrentUserProfileName}=&quot;Adyen v2 Partnership Lead&quot;),&quot;PM Generated&quot;,
IF({!forCurrentUserProfileName}=&quot;Adyen v2 Account Manager&quot;,&quot;AM Generated&quot;,
&quot;Sales Generated&quot;)))</expression>
    </formulas>
    <formulas>
        <name>ForLeadOrigin</name>
        <dataType>String</dataType>
        <expression>CASE({!$Record.MainFormFill__c}, 
&apos;Partner Portal&apos;, &apos;Inbound Hot&apos;, 
&apos;Contact Sales&apos;, &apos;Inbound Hot&apos;, 
&apos;Reactivation&apos;, &apos;Inbound Hot&apos;, 
&apos;Inbound Call&apos;, &apos;Inbound Hot&apos;, 
&apos;Inbound Email&apos;,  &apos;Inbound Hot&apos;, 
&apos;Event Met&apos;, &apos;Inbound Cold&apos;, 
&apos;Test Account Settings&apos;, &apos;Inbound Hot&apos;, 
&apos;Product Interest&apos;, &apos;Inbound Hot&apos;, 
&apos;Country Interest&apos;, &apos;Inbound Hot&apos;, 
 &apos;Video on Demand&apos;, &apos;Inbound Cold&apos;,
&apos;Content Download&apos;, &apos;Inbound Cold&apos;,
&apos;Newsletter Signup&apos;, &apos;Inbound Cold&apos;,
&apos;Investor Relations&apos;, &apos;Inbound Cold&apos;,
&apos;Webinar&apos;, &apos;Inbound Cold&apos;,
&apos;Legal Update Signup&apos;, &apos;Inbound Cold&apos;,
 &apos;Event Purchased&apos;, &apos;Outbound&apos;,
&apos;Sales Generated&apos;, &apos;Outbound&apos;,
&apos;AM Generated&apos;, &apos;Outbound&apos;,
&apos;Outbound List&apos;, &apos;Outbound&apos;,
&apos;Sales Navigator&apos;, &apos;Outbound&apos;,
&apos;Event Signup&apos;, &apos;Inbound Cold&apos;, 
&apos;PM Generated&apos;, &apos;Inbound Hot&apos;, 
&apos;Platform self onboarding&apos;, &apos;Inbound Hot&apos;,
&apos;PSP sync&apos;, &apos;Inbound Hot&apos;,
&apos;Education Hub&apos;, &apos;Inbound Cold&apos;, 
&apos;Partner Signup&apos;, &apos;Inbound Hot&apos;,
&apos;Developer Newsletter&apos;, &apos;Inbound cold&apos;, 
&apos;Partner Newsletter&apos;, &apos;Inbound Cold&apos;, 
&apos;Inbound Hot&apos;)</expression>
    </formulas>
    <formulas>
        <name>forMessagesToSales</name>
        <dataType>String</dataType>
        <expression>TEXT(YEAR({!$Flow.CurrentDate}))&amp;&quot;-&quot;&amp;LPAD(TEXT(MONTH({!$Flow.CurrentDate})),2,&quot;0&quot;)&amp;&quot;-&quot;&amp;LPAD(TEXT(DAY({!$Flow.CurrentDate})),2,&quot;0&quot;)&amp;&quot;: &quot;&amp; {!$Record.Form_text_2__c} &amp; 
SUBSTITUTE({!$Label.NewLine},&quot;-&quot;,&quot;&quot;) &amp;
{!$Record.MessagesToSales__c}</expression>
    </formulas>
    <formulas>
        <name>forPartnerLeadRT</name>
        <dataType>String</dataType>
        <expression>{!$Label.PartnerLead}</expression>
    </formulas>
    <formulas>
        <name>forPointsOfEntry</name>
        <dataType>String</dataType>
        <expression>TEXT(YEAR({!$Flow.CurrentDate}))&amp;&quot;-&quot;&amp;LPAD(TEXT(MONTH({!$Flow.CurrentDate})),2,&quot;0&quot;)&amp;&quot;-&quot;&amp;LPAD(TEXT(DAY({!$Flow.CurrentDate})),2,&quot;0&quot;)&amp;&quot;: &quot;&amp; {!$Record.PointOfEntry__c} &amp; 
SUBSTITUTE({!$Label.NewLine},&quot;-&quot;,&quot;&quot;) &amp;
{!$Record.PointsOfEntry__c}</expression>
    </formulas>
    <formulas>
        <name>forState</name>
        <dataType>String</dataType>
        <expression>IF(TEXT({!$Record.CountryCode})=&quot;US&quot;,TEXT({!$Record.StateCode}),&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>forTotalUtmArray</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(SUBSTITUTE({!$Record.LastUTMArray__c},&quot;[&quot;,&quot;&quot;),&quot;]&quot;,&quot;&quot;) &amp; 
&quot;,&quot; &amp;
{!$Record.TotalUTMArray__c}</expression>
    </formulas>
    <formulas>
        <name>forWebsiteMatching</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(SUBSTITUTE(SUBSTITUTE({!$Record.Website},&quot;http://&quot;, &quot;&quot; ),&quot;https://&quot;, &quot;&quot;), &quot;www.&quot;,&quot;&quot; )</expression>
    </formulas>
    <interviewLabel>Before-Save Updates Lead {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Before-Save Updates Lead</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>GetPartnerReferral</name>
        <label>Get Partner Referral</label>
        <locationX>314</locationX>
        <locationY>2627</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>UpdateCurrentPartnerSource</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Partner_Referral__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Account</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetPartnerUserAccountId</name>
        <label>Get Partner User Account ID</label>
        <locationX>314</locationX>
        <locationY>2111</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetPartnerUserAccountName</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>forCurrentUserId</elementReference>
            </value>
        </filters>
        <object>User</object>
        <outputAssignments>
            <assignToReference>varPartnerUserAccountId</assignToReference>
            <field>AccountId</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>GetPartnerUserAccountName</name>
        <label>Get Partner User Account Name</label>
        <locationX>314</locationX>
        <locationY>2219</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SetPartnerUserFields</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varPartnerUserAccountId</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputAssignments>
            <assignToReference>varPartnerUserAccountName</assignToReference>
            <field>Name</field>
        </outputAssignments>
    </recordLookups>
    <start>
        <locationX>320</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>UpdateWebsiteMatching</targetReference>
        </connector>
        <object>Lead</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordBeforeSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>varCountryAssignmentId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCreatedByAlias</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCreatedByName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCreatedByProfileName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varPartnerUserAccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varPartnerUserAccountName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
